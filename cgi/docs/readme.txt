============================================================
               AmigoNewsBoard 取り扱い説明書  
============================================================

◎はじめに
------------------------------------------------------------
この度はAmigoNewsBoardをダウンロード頂きありがとうございます。
このスクリプトがあなたのサイトの発展に貢献できる事を願っております。
今後共AmigoNewsBoardならびにCGI DE AMIGO!!をよろしくお願い致します。


◎以前のバージョンより移行される方へ
------------------------------------------------------------
以前のバージョンからの変更点及び変更ファイルを
同梱のver.txtにてご案内しております。
こちらをご覧頂きますと最小限の作業で移行できます。

途中のバージョンを飛ばして移行されたい場合は
現在ご利用のバージョンから最新(利用する)バージョンまでの
全てのバージョンでの変更点及び変更ファイルをリストアップし
それらのファイルを最新(利用する)バージョンのものに差し替えて下さい。


◎設置手順１
-----------------------------------------------------------
1) newsboard.cgiをテキストエディタで開き1行目の
Perlのパスを使用サーバーに合わせて変更します。

※ほぼ#!/usr/bin/perlか#!/usr/local/bin/perlですが
分からない場合はサーバー管理者へ問い合わせて下さい。

2) 基本設定ファイルのパスを設定します。

※n-setup.cgiの位置や名称を変更されなければ
初期設定のままで問題ありません。

3) n-setup.cgiをテキストエディタで開き設定を変更します。

※設定時に'や;等を誤って削除しないように注意して下さい。
※ディレクトリを設定する際は最後に/を付けないで下さい。
※各ディレクトリやtitle.jsのパスは
newsboard.cgiからの相対パスで設定して下さい。
※データディレクトリ等の重要なディレクトリは
なるべくデフォルトから変更して下さい。

■管理用パスワード[※変更必須]

■基本ディレクトリ
newsboard.cgiを置くディレクトリ(http://から)

■サイトの最短URL
設置したサイトとして認識できる最短のURLです。
他のサイトからCGIを不正使用されるのを防止する為の機能(設定)です。

http://www.cgi-amigo.com/ と設定した場合
http://www.cgi-amigo.com/****.html等の
サイト内から呼び出されないとエラーとなるページがあります。

URLを''で囲んで複数設定する場合は,で区切ります。
(例1)@MyUrl=('http://www.aaaaa.com/');
(例2)@MyUrl=(
'http://www.aaaaa.com/',
'http://www.bbbbb.com/',
'http://www.ccccc.com/'
);

■ニュースページ等へのリンク制限(ON=1/OFF=0)
他サイトからのリンクを制限する機能

■ホーム(戻り先)のURL

■データディレクトリ〜ロックディレクトリ
各ディレクトリのパス

■ロックタイプ(1=flock式/2=rename式/3=symlink式/4=mkdir式/5=open式)
ロックタイプはご利用の環境やお好みに合わせて５種類から選択できます。

※open式は他の４種よりも強固さで若干劣ります。
なるべくopen式以外をご利用される事をお勧め致します。
※newsboard.cgi?cmd=ltにアクセスするとロックテストを行い
利用可能なロックタイプを表示します。
※ロックタイプを2に設定した場合のみlockフォルダ内に
DATA.locというファイル(空ファイル)を作成して下さい。

■メインスクリプト名
newsboard.cgi(デフォルト)のファイル名

■記事タイトルファイル(title.js)のパス
title.jsのパスを設定します。

■ユーザー設定を有効にする(ON=1/OFF=0)
ユーザー毎の表示件数設定をブラウザに記憶する機能

■クッキー有効期限(日)

■デフォルトニュース表示件数
基本のニュース表示件数
※ユーザー設定が無い場合等はこの表示件数になる

■ニュース表示件数をデフォルトに固定(ON=1/OFF=0)
ユーザー設定を無視しニュース表示件数を固定する機能

■最大ニュース表示件数
ニュース表示件数の最大値
※これを越えると強制的にデフォルトの表示件数になる

■デフォルト検索結果表示件数
基本の検索結果表示件数
※ユーザー設定が無い場合等はこの表示件数になる

■検索結果表示件数をデフォルトに固定(ON=1/OFF=0)
ユーザー設定を無視し検索結果表示件数を固定する機能

■最大検索結果表示件数
検索結果表示件数の最大値
※これを越えると強制的にデフォルトの表示件数になる

■オートリンク機能(ON=1/OFF=0)
記事内のURL・メールアドレスへ自動リンクする機能

■オートリンクのターゲット
オートリンク機能で貼られたリンクのTarget

■使用可能タグ
記事内に使用可能なタグを設定します。
'タグ名'=>タグタイプ
の書式で記述し複数指定は,で区切る
タグタイプは閉じるタイプのタグ(A等)は1
閉じないタイプのタグは(HR等)は0とする。

■使用可能タグ属性
'タグ名'→'属性'
の書式で記述し複数指定は,で区切る
※属性の複数指定は|で区切る

■最大ニュース件数(1ファイル)
1ファイルのニュースの最大件数

■最大タイトル件数
title.jsに記録されるタイトルの最大件数

■過去ログ最大ファイル数

■誤２重送信防止機能(ON=1/OFF=0)
送信ボタンを誤って何度も押した場合に
エラーを表示して２重投稿を防ぐ機能です。
通常はONにする事をお勧めしますが
利用サーバーによっては正常に動作しない場合があり
その場合はOFFにして下さい。

■method形式チェック(ON=1/OFF=0)
投稿時等のGET形式の送信を制限する機能

■ジャンプタイプ(0=Location/1=META)
設置サーバーがLocation使用不可の場合は1にして下さい。

■時差修正(日本は+9)
サーバー設置国毎の時差修正

■ジャンル設定
%GENRE=(
#--- ここに記述 ---#
);
上記の"#--- ここに記述 ---#"の部分に
ジャンルを記述していきます。
記述は ジャンル番号 => ['ジャンル名','ジャンル別URL'],
の書式で記述していきます。
※ジャンル番号は1つずつ増やしていきます。
※ジャンル名、ジャンル別URLには『'』と『,』という文字は使用できません。
※各ジャンル毎に最後の,を忘れずに記述して下さい。

■記事1件分のデザイン
print <<EOM;〜EOMの間に記事１件分のデザインを設定します。
$*****の部分は自動的にデータに置き換わりますので
それ以外の部分を編集して下さい。


◎設置手順２
------------------------------------------------------------
1) ファイルをサーバーへ転送します。
※画像ファイルはバイナリそれ以外はテキストモードで転送します。

2) 転送したらパーミッションを以下のように変更します。
※()内は主な設定値です。
※設定すべきパーミッションが分からない場合
右(700〜755なら755)から順に試してみて下さい。

[700]〜[755] (700,705,755)
data
lib
lib/template
newsboard.cgi

[701]〜[755] (701,705,755)
image

[700]〜[777] (700,705,755,707,777)
lock
data/old

[600]〜[666] (600,606,666)
title.js
data/news.cgi
data/submit.dat
data/old/index.txt

[604]〜[644] (604,644)
image/*****.gif
n-setup.cgi
lib/jcode.pl
lib/template/*****.html


◎設置手順３(任意)
------------------------------------------------------------
1) AmigoNewsBoardでは任意のページに
記事のタイトル・日付のみを表示できます。
タイトルを表示したいページに以下のように記述します。

<BODY>直後等に
<SCRIPT language="JavaScript" src="title.jsへのパス"></SCRIPT>
と記述します。

そしてタイトルを表示したい部分に
<A href="newsboard.cgiへのパス?Num=1">
<SCRIPT language="JavaScript">
<!--
document.write(TITLE1);
// -->
</SCRIPT></A>
&nbsp; <SCRIPT language="JavaScript">
<!--
document.write(DATE1);
// -->
</SCRIPT>
という書式の記述を好きな数だけします。
その際Num=1,TITLE1,DATE1の1の部分をそれぞれ2,3..と増やします。
最新の投稿のタイトルが1その前の投稿が2となります。

2) タイトルから直接関連URLページへジャンプするリンクを作る場合は
リンク部分に<A href="newsboard.cgiへのパス?cmd=dj&Num=1">のように
cmd=dj&を加えるだけでその他の部分は通常と変わりません。


◎JavaScriptエラーについて
------------------------------------------------------------
記事(タイトル)数がタイトル表示用に記述したJavaScriptより
少ない場合にJavaScriptエラーが起こります。
最初にタイトル数分の投稿をするか
投稿する毎にJavaScriptの記述を増やしていくか
のどちらかをすればエラーは起こりません。
※このエラーはCGI自体の動作に問題のあるものではありません。


◎テンプレート編集時の注意事項
------------------------------------------------------------
AmigoNewsBoardのテンプレートファイルは
それ自体がプログラムの一部の為
編集時にミスがありますと正常な動作が出来なくなります。
※エラーメッセージが表示されたり真っ白なページになります。

HTMLエディタ等で簡単にデザインが変更できますが
以下の点には注意して下さい。

1) 下記４種の行は改変したり
行中にスペースや余分な文字を入れないようにして下さい。
※HTMLエディタによっては自動構文エラー修正等により
自動的に改変される場合がある為注意が必要です。
その場合は下記4行を最初にテキストエディタ等で
コメント行等に置き換えて編集終了後に再び元に戻して下さい。

print <<"<!---ＨＴＭＬ--->";
&_*****;
<!---ＨＴＭＬ--->
1;

2) $***形式の部分はスクリプトが
適切な文字列に置き換えるので削除/改変しないで下さい。

3) Tabスペース・全角スペースを使用せず
半角スペースを使用して下さい。

4) @という文字を入れる場合は\@として下さい。

5) 文字化けする場合は文字化けが始まった文字の後ろに\をつけて下さい。


◎最後に
------------------------------------------------------------
このスクリプトをさらに便利なものへ成長させる為
ぜひ機能アンケート等にご協力下さい。

バグ報告はサポート掲示板又はメールにて受け付けております。
セキュリティに関する問題等の深刻なバグの場合は
お手数ですが『サポート掲示板には投稿せずに』
メールでご報告頂けますようお願い致します。
webmaster@cgi-amigo.com


============================================================
Copyright(c)2000 by CGI DE AMIGO!! All Right Reserved.